# vMessage Configuration File
# Thanks for downloading my plugin! I hope you like it!
# MiniMessage is supported for formatting in all messages.
# Placeholders are parsed before MiniMessage so you can use them in your format.
# For in-depth explanation of the configuration options, visit: https://github.com/szymon-off/vMessage/wiki/Configuration-(config.yml)
# 
# ⚠️ If you have used vMessage before v1.8.0, the contents of this file may be malformed ⚠️

messages:
  chat:
    enabled: true
    
    # %player% - Player
    # %message% - Message
    # %server% - Player's Current Server
    # %prefix% - LuckPerms Prefix
    # %suffix% - LuckPerms Suffix
    format: '%prefix% <b>%player%:</b> %message%'
    
    # Whether to allow players to use MiniMessage in their messages
    allow-mini-message: false
    
    # Whether to parse vanilla legacy color/format codes (&0-&f, &l, &n, &o, &r, &k, &m, &x etc.).
    allow-legacy-color-codes: true
    
    # The message to send when a muted player tries to send a message
    # %player% - Player
    # %message% - Message
    # %server% - Player's Current Server
    # %prefix% - LuckPerms Prefix
    # %suffix% - LuckPerms Suffix
    # %reason% - Reason for muting
    # %end-date% - End date of the mute
    # %moderator% - Moderator who muted the player
    muted-message: <red>You are muted and cannot send messages.</red>

  join:
    enabled: true
    
    # %player% - Player
    # %server% - Player's Current Server
    # %prefix% - LuckPerms Prefix
    # %suffix% - LuckPerms Suffix
    format: <dark_gray>(<green>+<dark_gray>) <gray>%player%

  leave:
    enabled: true

    # %player% - Player
    # %server% - Player's Last Server
    # %prefix% - LuckPerms Prefix
    # %suffix% - LuckPerms Suffix
    format: <dark_gray>(<red>-<dark_gray>) <gray>%player%

  change:
    enabled: true

    # %player% - Player
    # %old_server% - Player's Previous Server
    # %new_server% - Player's New Server
    # %prefix% - LuckPerms Prefix
    # %suffix% - LuckPerms Suffix
    format: <dark_gray>(<gold>•<dark_gray>) <gray>%player% <dark_gray>(<gold>%old_server%→%new_server%<dark_gray>)

commands:
  # /broadcast, /bcast, /bc
  broadcast:
    enabled: true

    # %player% - Player
    # %message% - Message
    # %server% - Player's Current Server
    # %prefix% - LuckPerms Prefix
    # %suffix% - LuckPerms Suffix
    format: <b><#00ffff>%player%:</b> %message%
    
    # If false, players will need the permission 'vmessage.command.broadcast' to use the /broadcast command
    # If true, all players can use the /broadcast command by default unless they have the permission 'vmessage.command.broadcast' set to false
    allow-by-default: false
    
    # Whether to allow players to use MiniMessage in their broadcast messages
    # MiniMessage is always allowed for console broadcasts
    allow-mini-message: true
    
    # Whether to parse vanilla legacy color/format codes (&0-&f, &l, &n, &o, &r, &k, &m, &x etc.).
    allow-legacy-color-codes: true
  
  # /message, /msg, /whisper, /w
  message:
    enabled: true
    
    # %sender% - Sender
    # %receiver% - Receiver
    # %message% - Message
    # %sender-server% - Sender's Current Server
    # %receiver-server% - Receiver's Current Server
    # %sender-prefix% - Sender's LuckPerms Prefix
    # %sender-suffix% - Sender's LuckPerms Suffix
    # %receiver-prefix% - Receiver's LuckPerms Prefix
    # %receiver-suffix% - Receiver's LuckPerms Suffix
    # Custom meta placeholders are currently not supported for this option
    format:
      sender: '<b>(<#00ffff>You </#00ffff>→ <#00ffff>%receiver%</#00ffff>): </b>%message%'
      receiver: '<b>(<#00ffff>%sender% </#00ffff>→ <#00ffff>You</#00ffff>): </b>%message%'
    
    # Whether to allow players to use MiniMessage in their private messages
    allow-mini-message: false
    
    # Whether to parse vanilla legacy color/format codes (&0-&f, &l, &n, &o, &r, &k, &m, &x etc.).
    allow-legacy-color-codes: true
    
    # If false, players will need the permission 'vmessage.command.message' to use the /message command
    # If true, all players can use the /message command by default unless they have the permission 'vmessage.command.message' set to false
    # This also affects the /reply command
    allow-by-default: false
    
    # Whether to enable the /reply command
    # It will reply to the last person who sent you a message
    enable-reply-command: true

# If you want to use additional LuckPerms meta values you can add them here
# You can then use them in placeholder format like this: &custom_name& [AMPERSAND not PERCENT]
luck-perms-meta:
  custom-name1: meta_key1
  custom-name2: meta_key2

# If you want to display a different name for a server you can add it here
# It will then be used in the messages above instead of the server's actual name
server-aliases:
  lobby: Lobby
  lobby1: Lobby
  lobby2: Lobby


# OneBot protocol integration for QQ group message syncing
onebot:
  enabled: true

  # NapCat HTTP API base URL
  api-url: http://localhost:6727
  group-id: '123456789'

  # Access token for sending messages to NapCat API (leave empty to disable authentication)
  access-token-send: ''

  # remove Unicode control characters from nickname to avoid display order issue
  nickname-clean: true

  # When true, strip all formatting from message content when forwarding to QQ (only %message% etc. become plain text)
  strip-formatting-in-qq: true
  
  callback:
    enabled: true
    
    # Host to listen on for HTTP callback
    host: 0.0.0.0
    port: 8080
    
    # Callback path
    path: /onebot/callback

    # Access token for verifying incoming callbacks from NapCat (leave empty to disable authentication)
    access-token-callback: ''
  
  # Whether to forward messages to QQ group
  forward-to-qq:
    chat: true
    join: true
    leave: true
    change: false
    broadcast: true
    format:
      
      # %player% - Player name
      # %message% - Message content
      # %server% - Server name
      # %old_server% - Previous server
      # %new_server% - New server
      chat: '[%server%] %player%: %message%'
      join: '[游戏] %player% 加入了服务器'
      leave: '[游戏] %player% 离开了服务器'
      change: '[游戏] %player% 从 %old_server% 切换到 %new_server%'
      broadcast: '[广播] %message%'

    # Delay time in seconds before sending leave messages.
    # If player rejoins during this delay,
    # the leave message is cancelled and the join message is filtered (not sent).
    leave-delay: 15
  
  # Whether to forward QQ group messages to game
  forward-to-game:
    enabled: true
    format:
      # Message format for forwarding QQ group messages to game
      # %message% - Message content from QQ
      # %sender% - Sender nickname
      # %sender_id% - Sender QQ number
      # %sender_role% - Sender role (owner/admin/member)
      to-game: '[QQ群] %sender%: %message%'
  
  # Enable debug logging for OneBot integration (shows detailed token verification and request information)
  debug: true

# Whether to check for updates on plugin startup
check-updates: true

# This option is here for safety when updating the plugin from an older version
# WARNING: This will overwrite the previous backup (config.yml.bak)
backup-config: false
